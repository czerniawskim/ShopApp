{% extends "app/homepage.html.twig" %}


{% block title %}Branches
{% endblock %}

{% block body %}
    <div class="orgContainer">
        <div class='branches'>
            {% for key, branch in branches %}
                <h2>{{key}}</h2>
                {% for elem in branch %}
                    <p>
                        <i class="fas fa-map-marker-alt"></i>
                        {{elem}}</p>
                {% endfor %}
            {% endfor %}
        </div>
        <div class="hours">
            {% set status = '' %}
            {% set earlier = true %}
            {% set later = true %}

            {% for key, hours in hours %}
                {% if "now"|date('l') == key %}
                    {% if key != "Sunday" %}
                        {% for hour in hours %}
                            {% if loop.first %}
                                {% if "now"|date('H:i:s') < hour|date('H:i:s') %}
                                    {% set earlier = true %}
                                {% else %}
                                    {% set earlier = false %}
                                {% endif %}
                            {% endif %}
                            {% if loop.last %}
                                {% if "now"|date('H:i:s') < hour|date('H:i:s') %}
                                    {% set later = false %}
                                {% else %}
                                    {% set later = true %}
                                {% endif %}
                            {% endif %}
                        {% endfor %}
                    {% else %}
                        {% set status = 'Closed' %}
                    {% endif %}
                {% endif %}
            {% endfor %}

            {% if earlier == false and later == false %}
                {% set status = 'Open' %}
            {% else %}
                {% set status = 'Closed' %}
            {% endif %}

            <p class="{{status}}">
                <i class="far fa-clock"></i>
                {{status}}
            </p>

            {% for key, hour in hours %}
                <p>
                    <span>{{key}}</span>
                    <span>
                        {% if loop.last %}
                            Closed
                        {% else %}
                            {% for h in hour %}
                                {{h}}
                                {% if loop.first %}
                                    -
                                {% endif %}
                            {% endfor %}
                        {% endif %}
                    </span>
                </p>
            {% endfor %}
        </div>
    </div>
{% endblock %}
